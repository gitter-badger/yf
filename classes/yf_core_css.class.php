<?php

class yf_core_css {
	function _init() {
		$this->content_added = array();
		$this->content_md5 = array();
	}
	
	function add($content,$is_file = true) {
		// input: string/array
		// todo: auto detection of css/link
		if (!is_array($content)) $content = array(0 => $content);
		foreach ($content as $v) {
			if ($is_file) $v = "<link href=\"".$v."\" rel=\"stylesheet\">";
			$md5 = md5($v);
			if (empty($this->content_md5[$md5])) {
				$this->content_md5[$md5] = $md5;
				$this->content_added[] = $v;
			}
		}
	}
	
	function show_css() {
		$content = tpl()->parse('style_css');
		if (strpos($content,"\n") == 0) {
			// single string = automatically generated by compass
			$content = "<link href=\"".WEB_PATH.tpl()->TPL_PATH.$content."\" rel=\"stylesheet\">";
		}
		foreach ($this->content_added as $v) {
			$content .= $v;
		}
		return $content;
	}
	
}
